---
title: "Golang逃逸分析之我见"
date: 2019-03-21T09:49:31+08:00
lastmod: 2019-03-21T09:49:31+08:00
draft: true
keywords: [golang]
---
https://golang.org/doc/faq#stack_or_heap


看完golang的逃逸分析, 我觉得应该不应该太注重这个东西. 看java的内存基本上都是堆上弄的, 他们的gc都么有问题, 我觉得golang的更加不是问题. 当我们的程序在实在没有地方需要优化的时候, 而且对这段代码的性能要求又贼高, 这个时候可以考虑逃逸. 我觉得还是正常写代码就好. 就是全部不用指针的, 也会出现逃逸的情况.

而且不是你的程序那么写，编译器就会按照那样编译。我们看到那些看逃逸的文章，编译的时候加的那些参数，就是不让编译器优化的，真正编译出来的机器码可能不是我们想象的那样

当然写程序能时时刻刻考虑到逃逸，那会更好

真的有核心模块实在不能忍受gc带来的性能损失，可以考虑用c/c艹来实现

真正想完全控制golang逃逸，是个大工程，需要去闹明白golang的编译器